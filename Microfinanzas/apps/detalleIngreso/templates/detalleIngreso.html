{% extends 'base.html' %}
{% load static %}
{% block title %}Listado de Detalle de Ingresos{% endblock %}
{% block content %}
<div class="container mt-4">
    <div class="row">
        <div class="col-md-8 offset-md-2">
            <div class="card">
                <div class="card-header">
                    <h3 class="card-title">Listado de Detalle de Ingresos</h3>
                </div>
<a href="{% url 'crear_detIngreso' %}" class="btn btn-outline-secondary">Nuevo Detalle de Ingreso</a>
  
<!-- ðŸ” FORMULARIO DE BÃšSQUEDA -->
    <form method="GET">
        <label for="fecha">Buscar por fecha exacta:</label>
        <input type="date" name="fecha_creacion" id="fecha_creacion" value="{{ request.GET.fecha_creacion }}">

        <br><br>

        <label for="desde">Fecha desde:</label>
        <input type="date" name="desde" id="desde" value="{{ request.GET.desde }}">

        <label for="hasta">Fecha hasta:</label>
        <input type="date" name="hasta" id="hasta" value="{{ request.GET.hasta }}">

        <button type="submit">Buscar</button>
    </form>

    <br><hr><br>

    <!-- ðŸ“Œ RESULTADOS -->
    <h2>Resultados</h2>

    {% if detalleIngresos %}
        <table border="1" cellpadding="8">
            <thead>
                <tr>
                    <th>Fecha</th>
                    <th>Unidad de medida</th>
                    <th>Cantidad</th>
                    <th>Monto</th>
                </tr>
            </thead>
            <tbody>
                {% for item in detalleIngresos %}
                <tr>
                    <td>{{ item.fecha_creacion }}</td>
                    <td>{{ item.unidad_medida }}</td>
                    <td>{{ item.cantidad }}</td>
                    <td>{{ item.monto_detalle }}</td>
                </tr>
                {% endfor %}
            </tbody>
        </table>
    {% else %}
        <p>No hay detalles de ingresos para mostrar.</p>
    {% endif %}

    <br>

    <!-- ðŸ“Œ MOSTRAR ÃšLTIMO REGISTRO -->
    {% if ultimoDetalleIngreso %}
        <h3>Ãšltimo Detalle Ingreso:</h3>
        <p>{{ ultimoDetalleIngreso.fecha_creacion }} - {{ ultimoDetalleIngreso.monto_detalle }}</p>
    {% endif %}
{% endblock %}
            </div>
        </div>
    </div>
</div>

